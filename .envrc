# .envrc - direnv configuration for lspls
# Run `direnv allow` to activate

# Wrapper for golangci-lint that uses tools.go.mod and project config
golangci-lint() {
  go tool -modfile=tools.go.mod golangci-lint --config=tools/lint/golangci.toml "$@"
}
export -f golangci-lint

# Wrapper for gotestsum that uses tools.go.mod
gotestsum() {
  go tool -modfile=tools.go.mod gotestsum "$@"
}
export -f gotestsum

# Ensure lefthook is installed for pre-commit hooks
if command -v lefthook &> /dev/null; then
  if [ ! -f .git/hooks/pre-commit ] || ! grep -q lefthook .git/hooks/pre-commit 2>/dev/null; then
    echo "Installing lefthook git hooks..."
    lefthook install
  fi
else
  echo "Warning: lefthook not found. Install with: go install github.com/evilmartians/lefthook@latest"
fi

# Optional: Add bin to PATH if you build locally
# PATH_add bin
