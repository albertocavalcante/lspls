Test struct with optional field adds omitempty to JSON tag.
Note: optional:true adds omitempty but does NOT make the type a pointer.
For pointer types, use the "or" type with null (T | null pattern).

-- input.json --
{
  "metaData": {"version": "3.17.0"},
  "structures": [
    {
      "name": "TextDocumentIdentifier",
      "documentation": "A literal to identify a text document in the client.",
      "properties": [
        {
          "name": "uri",
          "type": {"kind": "base", "name": "string"},
          "documentation": "The text document's URI."
        }
      ]
    },
    {
      "name": "VersionedTextDocumentIdentifier",
      "documentation": "A text document identifier to denote a specific version.",
      "properties": [
        {
          "name": "uri",
          "type": {"kind": "base", "name": "string"},
          "documentation": "The text document's URI."
        },
        {
          "name": "version",
          "type": {"kind": "base", "name": "integer"},
          "optional": true,
          "documentation": "The version number of this document. If omitted, the version is unknown."
        }
      ]
    }
  ],
  "enumerations": [],
  "typeAliases": []
}

-- want/protocol.go --
// Code generated by lspls. DO NOT EDIT.
package protocol

import "encoding/json"

var _ = json.RawMessage{} // suppress unused import

// A literal to identify a text document in the client.
type TextDocumentIdentifier struct {
	// The text document's URI.
	Uri string `json:"uri"`
}

// A text document identifier to denote a specific version.
type VersionedTextDocumentIdentifier struct {
	// The text document's URI.
	Uri string `json:"uri"`
	// The version number of this document. If omitted, the version is unknown.
	Version int32 `json:"version,omitempty"`
}
