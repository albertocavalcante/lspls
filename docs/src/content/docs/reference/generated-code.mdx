---
title: Generated Code
description: Understanding the Go code generated by lspls
---

# Generated Code

This page explains the format and structure of code generated by lspls.

## File Header

Every generated file includes a header comment:

```go
// Code generated by lspls. DO NOT EDIT.
// Source: https://github.com/microsoft/vscode-languageserver-node@release/protocol/3.17.6-next.14
// Ref: release/protocol/3.17.6-next.14
// Commit: 66a087310eea0d60495ba3578d78f70409c403d9
// LSP Version: 3.17.0

package protocol
```

## Type Mappings

### Structures

TypeScript interfaces become Go structs:

```go
// Represents a location inside a resource.
type Location struct {
    // The document's URI.
    Uri DocumentUri `json:"uri"`
    // The location's range.
    Range Range `json:"range"`
}
```

### Optional Fields

Optional fields use pointer types with `omitempty`:

```go
type TextDocumentIdentifier struct {
    Uri DocumentUri `json:"uri"`
}

type OptionalVersionedTextDocumentIdentifier struct {
    TextDocumentIdentifier
    // The version number, can be null.
    Version *int32 `json:"version,omitempty"`
}
```

### Enumerations

TypeScript enums become Go constants with typed values:

```go
// A set of predefined position encoding kinds.
type PositionEncodingKind string

const (
    // UTF-8 character offset
    PositionEncodingKindUTF8 PositionEncodingKind = "utf-8"
    // UTF-16 character offset
    PositionEncodingKindUTF16 PositionEncodingKind = "utf-16"
    // UTF-32 character offset
    PositionEncodingKindUTF32 PositionEncodingKind = "utf-32"
)
```

### Union Types

TypeScript union types (`A | B`) become special `Or_*` types with JSON marshaling:

```go
// Or_Location_ArrLocation is a union type for: Location | []Location
type Or_Location_ArrLocation struct {
    Value any `json:"value"`
}

func (t Or_Location_ArrLocation) MarshalJSON() ([]byte, error) {
    switch x := t.Value.(type) {
    case Location:
        return json.Marshal(x)
    case []Location:
        return json.Marshal(x)
    case nil:
        return []byte("null"), nil
    }
    return nil, fmt.Errorf("type %T not one of [Location []Location]", t.Value)
}

func (t *Or_Location_ArrLocation) UnmarshalJSON(x []byte) error {
    if string(x) == "null" {
        t.Value = nil
        return nil
    }
    var h0 Location
    if err := json.Unmarshal(x, &h0); err == nil {
        t.Value = h0
        return nil
    }
    var h1 []Location
    if err := json.Unmarshal(x, &h1); err == nil {
        t.Value = h1
        return nil
    }
    return fmt.Errorf("unmarshal failed to match one of [Location []Location]")
}
```

### Type Aliases

TypeScript type aliases become Go type aliases:

```go
type DocumentUri = string
type URI = string
type Declaration = Or_Location_ArrLocation
```

## Base Type Mappings

| TypeScript | Go |
|------------|-----|
| `string` | `string` |
| `integer` | `int32` |
| `uinteger` | `uint32` |
| `decimal` | `float64` |
| `boolean` | `bool` |
| `null` | `any` |
| `URI` | `string` |
| `DocumentUri` | `string` |
| `LSPAny` | `any` |

## Dependency Resolution

When generating specific types with `-t`, lspls automatically includes referenced types:

```bash
# Requesting Range automatically includes Position
lspls -t Range -o ./types.go
```

Generated output will include:

```go
type Range struct {
    Start Position `json:"start"`
    End   Position `json:"end"`
}

type Position struct {
    Line      uint32 `json:"line"`
    Character uint32 `json:"character"`
}
```

## Documentation Comments

LSP documentation is preserved as Go doc comments:

```go
// Represents a location inside a resource, such as a line
// inside a text file.
type Location struct {
    // The document's URI.
    Uri DocumentUri `json:"uri"`
    // The location's range.
    Range Range `json:"range"`
}
```

Version annotations are also preserved:

```go
// Inlay hint information.
//
// @since 3.17.0
type InlayHint struct {
    // ...
}
```
